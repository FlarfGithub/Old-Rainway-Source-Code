version=pmwiki-2.2.130 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum= php var $test = "some_text"; is not 'true', but returnes true, when used in condition. (+23)
ctime=1162909193
name=PmWikiDe.ConditionalMarkup
rev=36
targets=PmWikiDe.Passwords,PmWikiDe.Security,PITS.01417,PmWikiDe.AuthUser,PmWikiDe.PageTextVariables,PmWikiDe.WikiTrails,Site.PageListTemplates,PmWikiDe.PageVariables,PmWikiDe.MarkupExpressions,Cookbook.ConditionalMarkupSamples
text=(:title Bedingte Auszeichnung:)%0a(:Summary:Die if-Direktive erlaubt es, Teile einer Seite bei der Darstellung zu berücksichtigen oder auszuschließen:)%0a(:Original_Page: PmWiki.ConditionalMarkup:)%0a(:Translation_Date: 2012-06-10:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Autoren (Fortgeschrittene) und Administratoren:)%0a%0a%25define=indent block margin-left=2em%25%0aDie [@(:if:)@] Direktive erlaubt es, Teile einer Seite bei der Darstellung zu berücksichtigen oder auszuschließen. %0a%0a!! Anwendung der [=(:if:)=] Direktive%0aDer grundsätzliche Aufbau der [@(:if:)@] Direktive ist%0a%0a->[@(:if Bedingung Parmeter:) body (:ifend:)@]%0a->[@(:if Bedingung Parmeter:) body (:else:) body (:ifend:)@]%0a->[@(:if Bedingung Parmeter:) body (:elseif Bedingung Parameter:) body (:ifend:)@]%0a->[@(:if Bedingung Parmeter:) body (:elseif Bedingung Parameter:) body (:else:) body (:ifend:)@]%0a%0awobei "Bedingung" eine der unten genannten zu testenden Bedingungen bezeichnet und "Parameter" einen Wert oder ein anderes Argument der Bedingung beschreibt.%0a%0a%25note%25Beachten Sie, dass [@(:if:)@] ohne Parameter und [@(:ifend:)@] identisch sind. Beachten Sie auch, dass [@(:if Bedingung:)@] automatisch eine vorhergehende Bedingung beendet. Wegen verschachtelter Bedingungen in mehreren Ebenen siehe [[#nested-conditions|verschachtelte Bedingungen]]. %0a%0a!! Eingebaute Bedingungen[[#built-in-conditions]]%0aDie folgenden Bedingungen sind eingebaut:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if name SEITENNAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktueller Seitenname ist "''[@SEITENNAME@]''" oder "''[@GRUPPENNAME.SEITENNAME@]''"%0a(:cellnr:)[@(:if group GRUPPENNAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktueller Name der Gruppe ist "''[@GRUPPENNAME@]''"%0a(:cellnr:)[@(:if auth LEVEL SEITENNAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Anwenderautorisierung - d.&nbsp;h. "seine Berechtigung" - entspricht einem "[@LEVEL@]" wobei der [@LEVEL@] : [@read@], [@edit@], [@upload@], [@attr@] oder [@admin@] sein kann; [@SEITENNAME@] ist optional. \\%0aDas wird meistens benutzt, um Teile des Quelltextes, die nur für Verfasser oder Administratoren nützlich sind, für diese sichtbar zu machen und vor anderen zu verbergen. \\%0a%25red%25'''Sicherheitswarnung''': Um Inhalte zu sicher verstecken, ist weder diese noch eine andere bedingte Auszeichnung ausreichend. Bedingungte Auszeichnungen können in vielen Fällen einfach umgangen werden%25%25, wie in [[Passwords[#condmarkup-secrets)|+]] beschrieben wird. Siehe auch [[Security|+]], [[PITS:01417]]. Sie müssen zusätzlich die [[PmWikiDe/Passwords#pageattr|Seite schützen]].\\%0aDer Grund ist, dass ein Benutzer, der eine Seite bearbeiten oder den Quellkode ansehen kann, auch den Inhalt innerhalb der bedingten Auszeichnung sehen kann.%0a(:cellnr:)[@(:if authid:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktueller Anwender ist authentifiziert - d.&nbsp;h. hat sich durch "$[Login]" ausgewiesen - um diese Bedingung anwenden zu können, muss das Wiki die [[PmWikiDe/AuthUser|+]] aktiviert haben oder einen anderen Mechanismus, der die [@$AuthId@]-Variable setzt.%0a(:cellnr:)[@(:if enabled InvalidLogin:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)Username und Passwort nicht authentifiziert. - um diese Bedingung anwenden zu können, muss das Wiki die [[PmWikiDe/AuthUser|+]] aktiviert haben.%0a(:cellnr:)[@(:if true:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)das Folgende immer auswerten/anzeigen, ''true'' klein schreiben(!)%0a(:cellnr:)[@(:if false:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)das Folgende nicht auswerten/anzeigen (gleicht einem Kommentar, aber [[Page Text Variables(#conditionals)|+]] werden gesetzt!), ''false'' klein schreiben(!)%0a(:cellnr:)[@(:if attachments FILENAMES PAGENAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)@@PAGENAME@@ hat einen Anhang oder mehrere Anhänge unter den angegebenen. @@PAGENAME@@ kann weggelassen werden, dann wird die aktuelle Seite untersucht.%0a@@FILENAMES@@ bezeichnen einen Anhang wie "bild1.jpg" oder Anhangsmuster, getrennt durch Kommata, wie "bild*.jpg,*.png", wobei der Stern für eine beliebige Zahl weiterer Zeichen steht. Fehlt der Parameter, zählt jeglicher Anhang (d.&nbsp;h. "*").\\%0aWenn die Bedingung in einer Sidebar, einem Header oder einem Footer benutzt wird und der @@Seitenname@@ ist nicht angegeben, wird die Bedingung auf die Hauptseite angewendet.\\%0aBeispiel: [@(:if attachments *.png,*.gif Groupname.PageName:)@] %25note%25Beachte: Keine Anführungszeichen um die Dateinamen.%0a%0a(:cellnr colspan=3:)In den folgenden "if date"-Beispielen gilt:%0a* [@DATE@] kann Jahr-Monat sein.  Jahr-Monat-Tag ist optional.  %0a* [@VALUE@] kann ein Datum sein, muss aber mit %25newwin%25[[http://php.net/manual/en/function.strtotime.php | strtotime()]] erkannt werden.%0a* @@DATE@@ (oder @@DATE1@@ und @@DATE2@@ unten) haben ein etwas strengeres Format, das keine Leerzeichen enthalten darf. Jedes Leerzeichen in @@DATE1@@ oder @@DATE2@@ verursacht unvorhersagbare Ergebnisse.%0a* "now" oder "today" wird angenommen, wenn (@@VALUE@@) weggelassen wird%0a* %25newwin%25Daten stehen im [[http://w3.org/QA/Tips/iso-date|Standardformat]] @@yyyy-mm-dd@@ oder @@yyyymmdd@@ oder @@yyyymmddThhmm@@ (Beachten Sie das "T" zwischen dem Datum und der Uhrzeit, und sehen Sie sich die Anmerkung oben zu @@VALUE@@ an)%0a* das ".." darf keine führenden (zusammen mit @@DATE1@@) oder folgenden Leerzeichen (zusammen mit @@DATE2@@) haben.%0a(:cellnr:)[@(:if date DATE VALUE:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@VALUE@] im Bereich von [@DATE@] liegt.%0a(:cellnr:)[@(:if date DATE1.. VALUE:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@VALUE@] (oder das aktuelle Datum, wenn [@VALUE@] fehlt) gleich [@DATE1@] oder später ist (unbegrenzt)%0a(:cellnr:)[@(:if date ..DATE2 VALUE:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@VALUE@] (oder das aktuelle Datum, wenn [@VALUE@] fehlt) gleich [@DATE2@] oder früher ist (unbegrenzt)%0a(:cellnr:)[@(:if date DATE1..DATE2 VALUE:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@VALUE@] (oder das aktuelle Datum, wenn [@VALUE@] fehlt) zwischen [@DATE1@] und [@DATE2@] (inklusive) liegt%0a(:cellnr:)[@(:if enabled VAR:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn PHP [@VAR@] existiert und nicht falsch ist%0a(:cellnr:)[@(:if enabled AuthPw:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn der Anwender irgend ein Passwort während der aktuellen Browser-Sitzung eingegeben hat.%0a- Das bedeutet nicht, dass der Anwender das korrekte Passwort eingegeben hat, nur ''dass'' er eines eingegeben hat.%0a(:cellnr:)[@(:if equal STRING1 STRING2:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@STRING1@] = [@STRING2@]; benutze Anführungszeichen, wenn die Zeichenkette oder Zeichenkettenvariable Leerzeichen enthält, z. B.  [@"MY STRING"@]%0a(:cellnr:)[@(:if match REG_EXPRESSION:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn der aktuelle Seitenname dem regulären Ausdruck entspricht%0a(:cellnr:)[@(:if exists PAGENAME:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn die Seite "''pagename''" oder "''groupname.pagename''" existiert%0a(:cellnr:)[@(:if ontrail WikiTrailPage ThisPage:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)wahr, wenn [@ThisPage@] in einer Liste ist, die als [[wiki trails | trail]] auf der Seite "''WikiTrailPage''" benutzt wird%0a(:tableend:)%0a%0aDie "name" und "group" Bedingungen arbeiten sogar in einer inkludierten Seite, da "name" und "group" immer die aktuell ausgegebene Seite überprüfen, und nicht die Seite in der die Auszeichnung enthalten ist (Quelltext).%0a%0a%25note%25Beachte: Es gibt keine eingebaute Bedingung, die ?action= testet. Um zu prüfen, ob die aktuell angeforderte Aktion gleich ACTION ist,  benutze [@(:if equal {$Action} ACTION:)@].%0a%0a[[#concatenatedconditions]]%0a!! Verknüpfte Bedingungen%0aIn einigen Fällen, wo eingebaute Bedingungen einen Parameter haben, können die Parameter mit Hilfe eines Kommas aufgezählt werden, siehe%0a%0a* @@ [=(:=]if name Name1,Name2,-Name3:) @@%0a* @@ [=(:=]if group -Group1,Group2,Group3:) @@%0a%0a!! Negierte Bedingungen%0a%0aNegierte Formen der Bedingungen funktionieren ebenfalls:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if !attachments:)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)diese Seite hat keine Anhänge%0a(:cellnr colspan=3:)&nbsp;%0a(:cellnr:)[@(:if ! name PAGENAME:)@]%0a(:cell rowspan=2 valign=middle:)&nbsp;-&nbsp;%0a(:cell rowspan=2 valign=middle:)aktuelle Seite heißt NICHT "[@PAGENAME@]"%0a(:cellnr:)[@(:if name -PAGENAME :)@]%0a(:cell:)%0a(:cellnr:)[@(:if group -GROUPNAME1,-GROUPNAME2 :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)diese Gruppe heißt weder "[@GROUPNAME1@]" noch "[@GROUPNAME2@]"%0a(:tableend:)%0a%0a!! Verschachtelte Bedingungen%0a%0aBeachten Sie, dass jedes [@(:if cond:)@] automatisch das vorhergehende beendet, daher können Auszeichnungen einfach durchgeprüft werden (und sind ''nicht'' verschachtelt).%0a(:table class='indent' valign=top:)%0a(:cellnr:)[@(:if enabled AuthPw:)@]%0a(:cell:)* Du hast ein Passwort eingegeben%0a(:cellnr:)[@(:if auth read:)@]%0a(:cell:)* Du darfst lesen%0a(:cellnr:)[@(:if auth read Group.Page:)@]%0a(:cell:)* Du darfst die Group.Page lesen%0a(:cellnr:)[@(:if auth edit:)@]%0a(:cell:)* Du darfst bearbeiten%0a(:cellnr:)[@(:if auth upload:)@]%0a(:cell:)* Du darfst Dateien hochladen%0a(:cellnr:)[@(:ifend:)@]%0a(:tableend:)%0a%0a Die folgenden beiden Beispiele sind identisch in ihrer Wirkung:%0a* @@ [=(:=]if cond1:) cond1 is true [=(:=]if cond2:) cond2 is true [=(:=]ifend:)@@%0a* @@ [=(:=]if cond1:) cond1 is true %25bgcolor=#fcc%25[=(:=]ifend:)%25%25[=(:=]if cond2:) cond2 is true [=(:=]ifend:)@@%0a%0aBedingungen können seit der Version 2.2.beta66 verschachtelt werden. Für verschachtelte Bedingung müssen Sie die if und die korrespondierenden else/ifend nummerieren.%0a->[@%0a(:if cond1:)%0a   cond1 is true%0a      (:if2 cond2:)%0a         cond1 und cond2 sind wahr%0a      (:else2:)%0a         cond1 ist wahr, cond2 ist falsch%0a      (:if2end:)%0a(:else:)%0a   cond1 ist falsch, Test auf cond2 wurde ignoriert%0a(:ifend:)%0a@]%0a[-''Für eine bessere Lesbarkeit wurden Einrückungen vorgenommen.''-]%0a%0a!!! Nutzung von Platzhaltern (Wildcard)(:if false:)%25green%25[-(new for pmwiki 2.1.beta21)-]:(:ifend:)%0a%0aDas Zeichen [@*@] kann als Platzhalter (Wildcard) genutzt werden, um jedes beliebige Zeichen keinmal, einmal oder mehrfach zu repräsentieren.\\%0aDas Zeichen [@?@] kann als Platzhalter (Wildcard) genutzt werden, um ein beliebiges Zeichen exakt einmal zu repräsentieren.\\%0aDie Platzhalter Zeichen ([@*@] und [@?@]) können auch mit den ''name'' und ''group'' Bedingungen benutzt werden:%0a%0a(:table class='indent' border=0 cellpadding=0 cellspacing=0 valign=top:)%0a(:cellnr:)[@(:if name PmCal.2005* :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktuelle Seite gehört in die Gruppe PmCal und beginnt mit 2005%0a(:cellnr:)[@(:if group PmWiki* :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktuelle Seite gehört in die Gruppe PmWiki oder in eine Gruppe, die mit PmWiki beginnt%0a(:cellnr:)[@(:if name Profiles.*,-Profiles.Profiles :)@]%0a(:cell:)&nbsp;-&nbsp;%0a(:cell:)aktuelle Seite gehört in die Gruppe [@Profiles@], ist aber nicht [@Profiles.Profiles@]%0a(:tableend:)%0a%0a%0a!!! Anwendung mit [[Site/page list templates | PageList-Vorlagen]]%0aDie bedingte Auszeichnung ([@(:if  :)@]-Direktive) wird extensiv mit [[Site/page list templates | PageList-Vorlagen]] genutzt.%0a%0aAnwendung mit Seiten Variablen:%0a-> =   aktuelles Element%0a-> %3c   voriges Element%0a-> >   nächstes Element%0a%0aBedingungen zur Strukturierung von pagelist Ausgaben:%0a   [@(:if equal {%3c$Group}:)@]               Am Anfang der Liste%0a   [@(:if equal {>$Group}:)@]               Am Ende der Liste%0a   [@(:if ! equal {=$Group} {%3c$Group}:)@]   Erstes Element der Gruppe%0a   [@(:if ! equal {=$Group} {>$Group}:)@]   Letztes Element der Gruppe%0a%0a!!!Gebrauch von [[PmWikiDe/page text variables|+]], [[PmWikiDe/page variables|+]] und [[PmWikiDe/markup expressions|+]]%0aPage-Text-Variablen (PTVs), Page-Variablen (PVs) und Markup-Expressions können in Bedingungen verwendet werden. Sie werden zugewiesen und ausgewertet, bevor die Bedingungen ausgewertet werden.%0a%0a%0a[[#combiningconditions]]%0a!!! Kombinieren von Bedingungen%0aBedingungen (wie vorher definiert) können zu komplexeren bedingten Ausdrücken kombiniert werden, in dem eine der drei folgenden untereinander äquivalenten Formen benutzt werden:%0a%0a->[@%0a(:if expr EXPRESSION :)%0a(:if [ EXPRESSION ] :)%0a(:if ( EXPRESSION ) :)@]%0a%0aBedingungen werden mit Booleschen Operatoren und Klammern zu Ausdrücken verbunden. In der folgenden Tabelle sind A und B entweder reguläre Bedingungen oder geklammerte sub-Ausdrücke regulärer Bedingungen:%0a%0a>>indent%3c%3c%0a|| border=1 cellpadding=2 cellspacing=0%0a||! Expression ||! Operator ||! Result ||%0a|| [@A and B@] || And ||WAHR, wenn sowohl A als auch B WAHR sind.||%0a|| [@A or B@] || Or ||WAHR, wenn entweder A oder B WAHR ist oder beide WAHR sind.||%0a|| [@A xor B@] || Xor ||WAHR, wenn entweder A oder B WAHR ist, aber nicht beide.||%0a|| [@! A@] || Not ||WAHR, wenn A nicht WAHR ist.||%0a|| [@A && B@] || And ||WAHR, wenn sowohl A als auch B WAHR sind.||%0a|| [@A || B@] || Or ||WAHR, wenn A oder B WAHR ist oder beide WAHR sind.||%0a>>%3c%3c%0a%0aBeispiel%0a->[@%0a(:if [ name SomePage and group SomeGroup ]:)    entspricht (:if name SomeGroup.SomePage:)@]%0a%0a'''Wichtige Hinweise:'''%0a* Leerzeichen um Operatoren und Klammern sind erforderlich.%0a* Bei unpaariger Klammersetzung gibt es keine spezifischen Fehlerhinweise.%0a* Bei verschachtelten Ausdrücken werden runde Klammer (keine eckigen) benutzt.%0a%0aDas Folgende ist folglich ein möglicher Weg, eine Bedingung zu formulieren, durch die der folgende Inhalt nur angezeigt wird, wenn der Nutzer entweder Administrator ist oder wenn er eingeloggt ist und das angegebene Datum abgelaufen ist.%0a%0a->[@(:if [ auth admin || ( authid && date 2006-06-01 ) ] :)@]%0a%0aDas Verschachteln mit Hilfe eckiger Klammern funktioniert wie erwartet nicht:%0a%0a->[@(:if [ auth admin || [ authid && date 2006-06-01 ] ] :) @]&nbsp;&nbsp;&nbsp;%25red%25Hinweis: Dies funktioniert nicht!%0a%0aEin häufiger Anwendungsfall für komlexere Tests sind Ausdrücke wie%0a%0a->[@(:if expr auth admin || auth attr || auth edit :)@]%0a->[@[[Logout -> {$Name}?action=logout]]@]%0a->[@(:ifend:)@]%0a%0awodurch ein Logout-Link genau dann angezeigt wird, wenn admin-, attr- oder edit-Rechte vorhanden sind.%0a%0a%25audience%25 Administratoren (Fortgeschrittene)%0a!! Neue Bedingungen kreieren%0a%0aSiehe das Kochbuch-Rezept [[Cookbook:ConditionalMarkupSamples]] (nur auf Englisch verfügbar).%0a%0aSiehe auch [[PageVariables#specialreferences | spezielle Verweise]] für die Benutzung von [={*$Variablen}=].%0a
time=1598680487
title=Bedingte Auszeichnung
