version=pmwiki-2.2.118 ordered=1 urlencoded=1
author=MFWolff
charset=UTF-8
csum=touch
ctime=1304705715
name=PmWikiDe.PageFileFormat
rev=19
targets=PmWikiDe.Passwords,SiteAdmin.Status,Cookbook.ImportText,Cookbook.AdminByShell,Cookbook.PageTopStore,Category.PmWikiDeveloper
text=(:title Seiten-Dateiformat:)%0a(:Summary: Beschreibung des Dateiformats der Wikiseiten, geeignet für eigene Experimente.:)%0a(:Original_Page: PmWiki.{$Name}:)%0a(:Translation_Date: 2011-05-07:)%0a(:Translation_Status: %25green%25fertig%25%25:)%0a(:Audience: Administratoren (FTP):)%0a%0aMöglicherweise haben Sie viele Dokumente, die Sie gern mit einem lokalen Programm in ein Format umwandeln möchten, das PmWiki anzeigen kann.%0a%0a>>width:70pct%3c%3c%0aSie könnten %0a* jedes dieser Dokumente öffnen und deren Inhalt mit Hilfe von Markieren, Kopieren und Einfügen in jeweils eine neue Wikiseite einbauen oder%0a* den Text im Voraus umformatieren und mit Ihrem FTP-Programm hochladen. %0a>>%3c%3c%0a%0a!!Format%0aNur zwei Zeilen sind in der Datei wirklich notwendig.%0a%0a->[@%0aversion=pmwiki-2.1.0 urlencoded=1%0atext=Markup text%0a@]%0a%0a%0a[[#uec]]"urlencoded=1" sagt PmWiki, dass die Werte urlkodiert (urlencoded) sind. Der aktuelle Wert von "version" spielt keine Rolle, solange nur irgendwo in der Zeile "urlencoded=1" auftaucht. Die Zeile muss aber mit "version=" beginnen.%0a%0a"text=" ''muss'' den mit Markups versehenen Text (Quelltext) enthalten, wobei %0a* die Zeilenumbrüche in '%250a' und %0a* die Prozentzeichen in '%2525' %0aumgewandelt sein müssen. %0a%0a-> Zusätzlich kodiert PmWiki  beim ''Schreiben'' der Seiten '%3c' als '%253c' (zur Unterstützung der Sicherheit), aber es ist nicht zwingend notwendig, das '%3c'-Zeichen zu kodieren, damit die Seite ''gelesen'' werden kann. %0a->Weitere Umwandlungen könnten in Zukunft dazu kommen.%0a%0aDamit die Suche und die [@(:pagelist :)@]-Markups funktionieren, müssen Sie sicherstellen, dass die Dateinamen mit einem Großbuchstaben beginnen.%0a%0aDamit die [@(:pagelist link=...:)@]-Markups in anderen Seiten diese Seite auflisten, ist ein drittes Attribut notwendig.%0a%0a->[@%0atargets=GroupName1.Pagename1,GroupName2.Pagename2,...%0a@]%0a%0a"targets=" ist eine kommagetrennte Liste aller Verweise in dieser Seite auf andere Seiten (ohne Leerzeichen nach den Kommata).%0a%0a!!!Seitenformatattribute%0a%0aSchlüssel, die in einer nackten PmWiki-Datei erscheinen könnten:%0a%0a:'''version=''': die Version von PmWiki, die beim Speichern der Datei verwendet wurde %0a-> in der gleiche Zeile dahinter ggf.:%0a--> [[#uec|urlencoded]]=1%0a--> [[#ordered|ordered]]=1 %0a:'''agent=''': des Autors Browser, mit dem die Seite erstellt und gespeichert wurde %0a:'''author=''': der letzte Autor, der den Text gespeichert hat%0a:'''charset=''': der Zeichensatz (character encoding) des Seitentextes%0a:'''csum=''':  Zusammenfassung der Änderungen, die beim Speichern angegeben wurde%0a:'''ctime=''': die Seitenerstellungszeit%0a:'''description=''': Beschreibung der Seite; wird benutzt, um [@%3cmeta name='description' />@] auszufüllen, wenn das via [@(:description Text zu Beschreibung der Seite:)@] gesetzt wurde%0a:'''host=''': die IP-Nummer des Rechners, von dem aus der letzte Autor gespeichert hat (bei einem anonymen Autor wird diese statt des Autors im Kopf der Versionen angezeigt)%0a:'''name=''': der Name der Seite (z. B. [@Main.WikiSandbox@])%0a:'''passwdattr''': verschlüsselte Version des Passwortes, das nötig ist, um die [[PmWikiDe/Passwords|Attribute]] der Seite zu ändern%0a:'''passwdedit''': verschlüsselte Version des Passwortes, das nötig ist, um den Text zu bearbeiten%0a:'''passwdread''': verschlüsselte Version des Passwortes, das nötig ist, um den Text zu lesen%0a:'''passwdupload''': verschlüsselte Version des Passwortes, das nötig ist, um Dateien hochzuladen%0a:'''rev=''': gibt an, wie oft die Seite bearbeitet und geändert wurde%0a:'''targets=''': Die Ziele der Verweise in dieser Seite%0a:'''text=''': der mit Markups versehene WikiText (Quelltext)%0a:'''time=''': die Zeit der letzten Speicherung als Unix-Zeitstempel (Sekunden seit dem 1. Januar 1970 um 00:0000 Uhr UTC)%0a:'''title=''': der Seitentitel, der per Seitentitel-Markup gesetzt wurde [@(:title Der Seitentitel:)@].%0a:'''newline=''': das Zeichen, das für einen Zeilenumbruch benutzt wird (überholt)%0a:'''updatedto=''': die Version, auf die PmWiki mittels [@upgrades.php@] upgedatet wurde (nur in [[SiteAdmin.Status]])%0a%0aDarunter sehen Sie Einträge, die die Versionen der Seiten dokumentieren (engl. history). Die Schlüssel werden von einem Doppelpunkt begrenzt, nicht von einem Gleichheitszeichen. Den Schlüsseln folgt ein Zeitstempel und nach einem Gleichheitszeichen der Wert (z. B. [@host:1303973339=192.168.1.101@]). Die zu einer Änderung (zusammen) gehörenden Schlüssel haben alle den gleichen Zeitstempel. %0a%0a:'''[=autor:=]''': der Autor, der diese Änderung (die neue Fassung) geschrieben hat %0a:'''[=csum:=]''':= die Zusammenfassung, die der Autor beim Speichern der neuen Fassung angegeben hat%0a:'''[=diff:=]''':= die Unterschiede zwischen der vorigen und der neuen Fassung des Textes (siehe auch [[http://de.wikipedia.org/wiki/Diff|diff-Format]])%0a:'''[=host:=]''':= die IP-Nummer des Rechners, von dem aus die Änderungen vorgenommen wurden (bei einem anonymen Autor wird diese statt des Autors im Kopf der Versionen angezeigt)%0a%0a!![[#creating]] Erzeugen einer Seite für die Auslieferung%0a%0aEin einfacher Weg, eine Wikiseiten-Datei zum Ausliefern (etwa mit einem Rezept oder mit einem Skin) zu erzeugen ist, die Seite mit PmWiki zu erstellen und anschließend mit einem Texteditor alle Zeilen zu löschen außer ''version'', ''text'', und ''ctime''.  Beispiel:%0a%0a->[@%0aversion=pmwiki-2.1.0 ordered=1 urlencoded=1%0atext=This is a line.%250aThis is another.%0actime=1142030000%0a@]%0a%0a[[#history]]%0a!! Die Versionen im Auge behalten%0a[[#ordered]]%0aIm Inneren der Seitendatei speichert PmWiki die letzte Version des mit Markups versehenen Textes, die wird benutzt, um den Text zum Anzeigen zu erzeugen. Der Änderungsverlauf wird als Sequenz von Differenzen zwischen der letzten Version und (jeweils) der Vorgängerversion festgehalten.%0a%0aPmWiki stellt den Verlauf normalerweise an das Ende der Datei, chronologisch rückwärts geordnet, und setzt das "ordered=1"-Item in dem Kopf der Datei (hinter "version=" in die gleiche Zeile). Wenn eine Operation nur die letztgültige Version eine Textes braucht, stoppt PmWiki das Einlesen der Daten beim ersten Eintrag des Änderungsverlaufs (erstes Auftreten eines Schlüssels, der auf einen Doppelpunkt statt auf ein Gleichheitszeichen endet). Das kann eine große Ersparnis an Zeit und Speicherplatz bedeuten.%0aWenn das "ordered=1"-Flag nicht gesetzt ist, macht PmWiki keine Annahmen über die Reihenfolge der Einträge in der Datei und bearbeitet die vollständige Datei.%0a%0a!! Seiten von/aus Textdateien laden%0aSiehe [[Cookbook: Import text]]. [-{Cookbook/ImportText$:Summary} &rarr; Importiere Textdateien als PmWiki-Seiten-].%0a%0a!! Unix-Werkzeug zum Extrahieren von Wikitexten%0a%0aDieses einzeilige sed-Kommando extrahiert den Text einer PmWiki-2.x-Datei und gibt ihn aus (kann als alias deklariert werden, z.&nbsp;B. pmcat):%0a%0a  sed -n 's/^text=//; s/%250a/\n/gp; s/%253c/%3c/gp; s/%2525/%25/gp' '''GroupName.PageName'''%0a%0aDas folgende Unix-Skript (getestet auf MacOSX) extrahiert und dekodiert den aktuellen Text einer Wikidatei:%0a%0a->[@%0a#!/bin/tcsh%0a# wtext - extract wiki text%0a#%0a# wtext wikifile > output%0a%0aset fn = "$1"%0aif ("$fn" == "") then%0a  echo "need input file parameter"%0a  exit 999%0aendif%0aif (! -f $fn) then%0a  echo "$fn does not exist"%0a  exit 999%0aendif%0arm sedin.$$ >& /dev/null%0aset ch = `grep ^newline= $fn | cut -d= -f2`%0aif ("$ch" == "") set ch = "%250a"%0acat %3c%3ceof > sedin.$$%0as/^text=//%0as/$ch/\%0a/g%0as/%253c/%3c/g%0as/%2525/%25/g%0aeof%0agrep "^text=" "$1" | sed -f sedin.$$%0arm sedin.$$ >& /dev/null%0a@]%0a%0a----%0a%0a!! Siehe auch %0a%0a* [[Cookbook:AdminByShell]] [-Eine Sammlung von 'shell tools', die SysAdmins von PmWiki eine große Hilfe sein könnten (%25red%25englisch%25%25)-]%0a* [[Cookbook:PageTopStore]] [-Eine Alternative zum Speichern von Seiten, die Seiteninhalte nicht verwürfelt, wenn er von außerhalb von PmWiki angesehen wird (%25red%25englisch%25%25)-]%0a%0aCategories: [[!PmWiki Developer]]
time=1569910765
title=Seiten-Dateiformat
